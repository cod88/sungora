package users

import (
	"fmt"

	"gopkg.in/sungora/app.v1/core"
)

type UserExtended struct {
	Scenario *scenarioTyp
}

// NewUserExtended расширенный функционал для модели
func NewUserExtended() *UserExtended {
	self := new(UserExtended)
	self.Scenario = scenario
	return self
}

// GetListFilter получение списка пользователей
func (self *UserExtended) GetListFilter(limit int) (users []*User) {
	core.DB.Raw(sql.GetListFilter, limit).Scan(&users)
	return
}

func sampleOther() {
	// sample custom orm query
	var users []*User
	var count int
	err := core.DB.
		Select("id, name").
		Table("users").
		Joins("...", "...").
		Where("...", "...").
		Group("...").
		Having("...", "...").
		Order("id ASC").
		Limit(5).
		Find(&users).
		Count(&count).Error
	fmt.Println(users, count, err)
	// sample slice one column
	var names []string
	core.DB.Model(&User{}).Pluck("names", &names)
	//
}
